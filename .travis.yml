language: node_js
node_js:
  - "stable"

run:
  name: update yarn
  command: |
    # remove default yarn
    sudo rm -rf $(dirname $(which yarn))/yarn*
    # download latest
    rm -rf ~/.yarn
    curl -o- -L https://yarnpkg.com/install.sh | bash
    echo 'export PATH="${PATH}:${HOME}/.yarn/bin"' >> $BASH_ENV

script: 
  - npm install
  - npm run build

deploy: 
  provider: surge
  skip_cleanup: true
  domain: nawfal4756-animated-website.surge.sh
  project: ./build/

on:
  branch: master